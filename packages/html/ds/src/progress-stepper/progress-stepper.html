{% from 'icon/icon.html' import govieIcon %}

{% macro govieProgressStepper(props) %}

    {% set isVertical = props.orientation == 'vertical'%}

  <div
    data-testid="progress-stepper"
    class="gi-progress-stepper {% if isVertical %}gi-flex-col{% endif %}"
  >
    {% for step in props.steps %}
      <div class="gi-flex gi-relative gi-flex-1 gi-min-h-20">
        <div
          class="gi-progress-stepper-step-container {% if not isVertical %}gi-flex-col{% endif %}"
          data-current="{{ loop.index0 == props.currentStepIndex }}"
          data-completed="{{ loop.index0 < props.currentStepIndex }}"
          data-next="{{ loop.index0 > props.currentStepIndex }}"
        >
          <div class="gi-progress-stepper-step">
            {% if loop.index0 < props.currentStepIndex %}
                {{ govieIcon({"icon": "check"}) }}
            {% else %}
              <div>{{ loop.index }}</div>
            {% endif %}
          </div>
          {{ step | safe | trim }}
        </div>
        {% if loop.index0 > 0 %}
          <div
            class="gi-progress-stepper-step-connector {% if isVertical %} gi-progress-stepper-step-connector-vertical {% endif %}"
          >
            <span></span>
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
{% endmacro %}
