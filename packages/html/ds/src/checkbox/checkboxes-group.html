{% from 'checkbox/checkbox.html' import govieCheckbox %} 
{% from 'checkbox/helpers.html' import getSizeClass %}
{% from 'heading/heading.html' import govieHeading %}
{% from 'hint-text/hint-text.html' import govieHintText %}
{% from 'error-text/error-text.html' import govieErrorText %}

{% macro govieCheckboxesGroup(props) %}
  <div data-testid="govie-checkboxes" data-module="gieds-checkboxes" class="gi-flex">
    {% if props.errorMessage %}
    <div class="gi-w-5 gi-border-l-[5px] gi-border-l-red-600 gi-border-solid"></div>
    {% endif %}
    <fieldset>
      <legend class="gi-mb-3.5 gi-font-primary sm:gi-text-sm md:gi-text-md lg:gi-text-lg">
        {% if props.title.asHeading %}
          {{ govieHeading({
            "size": "lg",
            "tag": "h1",
            "text": props.title.value 
          })}}
        {% else %}
          {{ props.title.value }} 
        {% endif %}
        {% if props.title.hint %}
          <div data-testid="title-hint" class="gi-mb-[-10px]">
            {{ govieHintText({
              "content": props.title.hint
            })}}
          </div>
        {% endif %}
      </legend>
      <div data-element="checkbox-container" class="gi-flex gi-flex-col gi-gap-2.5">
        {% if props.errorMessage %}
          <div class="gi-mb-[-14px]">
            {{ govieErrorText({
              "content": props.errorMessage
            })}}
          </div>
        {% endif %}
        {% for checkbox in props.items %}
          {{govieCheckbox({
            "label": checkbox.label, 
            "value": checkbox.value, 
            "hint": checkbox.hint,
            "checkboxId": props.fieldId + "-" + loop.index0,
            "size": props.checkboxesSize,
            "dataElement": "checkbox" + loop.index0
          })}}
        {% endfor %}
        {% if props.noneOption %}
          <p class="{{ getSizeClass(props.size) | trim }} gi-text-center gi-font-primary xs:gi-text-sm md:gi-text-md lg:gi-text-lg">or</p>
          {{ govieCheckbox({
            "label": props.noneOption.label,
            "value": props.noneOption.value,
            "hint": props.noneOption.hint,
            "checkboxId": props.fieldId + "-" + props.items.length,
            "size": props.checkboxesSize,
            "dataElement": "checkbox-none-option"
          })}}
        {% endif %}
      </div>
    </fieldset>
  </div>
{% endmacro %}