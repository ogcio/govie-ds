{% from 'button/helpers.html' import getVariantAppearanceClass, isButtonDisabled %}
{% from 'icon-button/helpers.html' import getSizeClass %}
{% from 'icon/icon.html' import govieIcon %}
{% from 'helpers/helpers.html' import addClasses %}

{% macro govieIconButton(props) %}
  {% set appearance = props.appearance or 'default' %}
  {% set variant = props.variant or 'primary' %}
  {% set size = props.size or 'medium' %}
  {% set isDisabled = 'disabled' if props.disabled else 'notDisabled' %}
  {% set iconSize = 'sm' if props.size == 'small' or not props.size %}

  <button
    data-element="icon-button-container"
    data-module="gieds-icon-button"
    data-testid="govieIconButton-{{ appearance }}-{{ variant }}-{{ size }}-{{ isDisabled }}"
    class="gi-btn {{ getVariantAppearanceClass(props.disabled, props.variant, props.appearance) | trim }} {{ getSizeClass(props.size) | trim }} {{ isButtonDisabled(props.disabled, props.variant, props.appearance) | trim }} {{ addClasses(props.className) | trim }}"
  >
    {{
      govieIcon({
          "icon": props.icon.icon,
          "size": iconSize,
          "outlined": props.icon.outlined,
          "disabled": props.icon.disabled,
          "ariaHidden": props.icon.ariaHidden,
          "ariaLabel": props.icon.ariaLabel,
          "inline": props.icon.inline,
          "className": props.icon.className
      })
    }}
  </button>
{% endmacro %}
